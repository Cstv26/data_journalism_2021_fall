---
  title: "RData Anlysis Project"
author: "Cassidie Kassidy and Maddie"
date: "Nov 2021"
output:
  html_document:
  theme: cerulean
highlight: pygments
toc: true
toc_float:
  collapsed: true
smooth_scroll: false
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(tidycensus)
library(janitor)
library(lubridate)
library(sf)
library(tigris)
install.packages("usmap")
library(usmap)

```

```{r}
install.packages("censusxy")
library(censusxy)
```

```{r}
Shootings<-read_csv("data-police-shootings-master/fatal-police-shootings-data.csv")

census_api_key("0105753aba54d204fb6c33c44044ae59449b3773", overwrite =TRUE)
```
###Question 1:
Are Police shootings primarily only happening in majority Black neighborhoods
```{r}
Shootings<-read_csv("data-police-shootings-master/fatal-police-shootings-data.csv")%>%
    filter(!is.na(longitude)) 

shootings <- tibble()
for (row_number in 1:nrow(shootings)) {
  
  row_df<- shootings %>%
  slice(row_number)
   longitude <- row_df$longitude
  latitude <- row_df$latitude
  census_results <- cxy_geography(longitude, latitude) %>%
    select(Census.Tracts.GEOID) %>%
    clean_names()
 
   row_df <- row_df %>%
     bind_cols(census_results) %>%
  shootings <- shootings %>%
    bind_rows(row_df) 
   
   print(paste0("finished ", row_number, " ", Sys.time()))
   
   if (row_number%%500 == 0) {
     filepath <- paste0("data/geocoded_results_", row_number, ".rds")
     write_rds(police_shootings_sf, filepath)
     police_shootings_sf <- as_tibble()
     
   }
     
}


```

###Question 2:

```{r}

```

###Question 3:

```{r}

```

